<header class="fixed top-0 z-50 w-full flex items-center justify-center pt-4">
  <nav
    class="flex items-center justify-between px-6 py-3 bg-gray-800/80 backdrop-blur-md rounded-full border border-gray-600/30 text-gray-200 max-w-4xl w-full"
  >
    <!-- Logo (Left Side) -->
    <div class="flex items-center space-x-2">
      <div
        class="w-10 h-10 bg-black rounded-full flex items-center justify-center overflow-hidden"
      >
        <!-- User's Chameleon Image -->
        <img
          src="/images/pruiz_test.webp"
          alt="Pruiz Logo"
          class="w-8 h-8 object-cover rounded-full"
        />
      </div>
      <a href="#me" class="nav-link" data-section="me">
        <span class="text-black dark:text-white font-bold text-lg">Pruiz</span>
      </a>
    </div>

    <!-- Navigation Links (Center) -->
    <div class="flex items-center space-x-8">
      <a
        href="#experience"
        class="nav-link text-gray-300 hover:text-lime-500 transition-colors duration-200 font-medium"
        data-section="experience"
      >
        Experience
      </a>
      <a
        href="#projects"
        class="nav-link text-gray-300 hover:text-lime-500 transition-colors duration-200 font-medium"
        data-section="projects"
      >
        Projects
      </a>
      <a
        href="#about"
        class="nav-link text-gray-300 hover:text-lime-500 transition-colors duration-200 font-medium"
        data-section="about"
      >
        About
      </a>
    </div>

    <!-- Action Buttons (Right Side) -->
    <div class="flex items-center space-x-3">
      <!-- Dark Mode Toggle (X button style) -->
      <button
        class="w-8 h-8 flex items-center justify-center text-gray-300 hover:text-white transition-colors duration-200 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-full"
        id="dark-mode-toggle"
      >
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
          <path
            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
          ></path>
        </svg>
      </button>

      <!-- GitHub Button -->
      <a
        href="https://github.com/pruiz05"
        target="_blank"
        class="w-8 h-8 flex items-center justify-center text-gray-300 hover:text-white transition-colors duration-200 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-full"
      >
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
          <path
            d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z"
          ></path>
        </svg>
      </a>
    </div>

    <!-- Mobile Menu Button -->
    <button
      class="md:hidden w-8 h-8 flex items-center justify-center text-white"
      id="mobile-menu-button"
    >
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </nav>

  <!-- Mobile Menu -->
  <div
    class="md:hidden hidden absolute top-20 left-1/2 transform -translate-x-1/2"
    id="mobile-menu"
  >
    <div
      class="bg-gray-800/95 backdrop-blur-md rounded-2xl border border-gray-600/30 py-4 px-6 space-y-3 min-w-[200px]"
    >
      <a
        href="#about"
        class="nav-link block text-gray-300 hover:text-lime-500 transition-colors duration-200 font-medium"
        data-section="about"
      >
        About
      </a>
      <a
        href="#experience"
        class="nav-link block text-gray-300 hover:text-lime-500 transition-colors duration-200 font-medium"
        data-section="experience"
      >
        Experience
      </a>
      <a
        href="#projects"
        class="nav-link block text-gray-300 hover:text-lime-500 transition-colors duration-200 font-medium"
        data-section="projects"
      >
        Projects
      </a>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  document.addEventListener("DOMContentLoaded", function () {
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");

    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener("click", function () {
        mobileMenu.classList.toggle("hidden");
      });
    }

    // Close mobile menu when clicking on a link
    const mobileLinks = mobileMenu?.querySelectorAll("a");
    mobileLinks?.forEach((link) => {
      link.addEventListener("click", function () {
        if (mobileMenu) {
          mobileMenu.classList.add("hidden");
        }
      });
    });
  });

  // Smooth scrolling for navigation links
  document.addEventListener("DOMContentLoaded", function () {
    const navLinks = document.querySelectorAll('a[href^="#"]');

    navLinks.forEach((link) => {
      link.addEventListener("click", (e) => {
        e.preventDefault();
        const targetId = link.getAttribute("href");
        const targetSection = document.querySelector(targetId || "");

        if (targetSection) {
          targetSection.scrollIntoView({
            behavior: "smooth",
            block: "start",
          });
        }
      });
    });
  });

  // Active navigation detection during scroll
  document.addEventListener("DOMContentLoaded", function () {
    const sections = document.querySelectorAll("section[id], [id]");
    const navLinks = document.querySelectorAll(".nav-link");

    function updateActiveNav() {
      let current = "";
      const scrollPosition = window.scrollY + 100; // Offset for better detection

      sections.forEach((section) => {
        const sectionTop = (section as HTMLElement).offsetTop;
        const sectionHeight = (section as HTMLElement).offsetHeight;
        const sectionId = section.getAttribute("id");

        if (
          sectionId &&
          scrollPosition >= sectionTop &&
          scrollPosition < sectionTop + sectionHeight
        ) {
          current = sectionId;
        }
      });

      // Update active state for all nav links
      navLinks.forEach((link) => {
        const linkSection = link.getAttribute("data-section");
        if (linkSection === current) {
          link.classList.add("nav-active");
        } else {
          link.classList.remove("nav-active");
        }
      });
    }

    // Initial call
    updateActiveNav();

    // Update on scroll
    window.addEventListener("scroll", updateActiveNav);
  });
</script>

<style>
  /* Add smooth transitions */
  nav a {
    position: relative;
  }

  nav a::after {
    content: "";
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -4px;
    left: 0;
    background-color: #84cc16;
    transition: width 0.3s ease;
  }

  nav a:hover::after {
    width: 100%;
  }

  /* Active navigation styles */
  .nav-link.nav-active {
    color: #84cc16 !important; /* lime-500 */
  }

  .nav-link.nav-active::after {
    width: 100%;
  }

  /* Ensure the active state overrides hover for the active link */
  .nav-link.nav-active:hover {
    color: #84cc16 !important;
  }
</style>
